/**
 * jQuery.gpObserveText 1.0
 * http://ginpen.com/jquery/gpobservetext/
 * https://github.com/ginpei/jQuery.gpObserveText
 *
 * Copyright (c) 2011 Takanashi Ginpei
 * http://ginpen.com
 *
 * Released under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(a){try{if(window.com.ginpen.gpObserveText){return}}catch(b){}if(!window.com){window.com={}}if(!com.ginpen){com.ginpen={}}var c=com.ginpen.gpObserveText={VERSION:"1.0",settings:{interval:100},exec:function(d,e){if(e&&this._isCommand(e)){var f=e;this.runCommand(d,f)}else{this.startObserving(d);d.bind("textchange",e)}},_isCommand:function(d){return !a.isFunction(d)},runCommand:function(d,e){switch(e){case"destroy":this.stopObserving(d);break}},startObserving:function(d){if(this._isObserved(d)){return}d.data("gpObserveText.lastValue",d.val());this._observe(d)},_observe:function(d){d.data("gpObserveText.timer",setTimeout(function(){if(c._isChanged(d)){c._fire(d)}if(c._isObserved(d)){c._observe(d)}},c.settings.interval))},_isObserved:function(d){return !!d.data("gpObserveText.timer")},stopObserving:function(d){clearTimeout(d.data("gpObserveText.timer"));d.removeData("gpObserveText.timer");d.removeData("gpObserveText.lastValue")},_isChanged:function(d){return d.val()!=d.data("gpObserveText.lastValue")},_fire:function(d){var e=d.val();d.trigger("textchange",d.data("gpObserveText.lastValue"));d.data("gpObserveText.lastValue",e)},banpei:null};a.fn.gpObserveText=function(d){return this.each(function(e,f){c.exec(a(f),d)})};a.fn.gpObserveText.settings=c.settings}(jQuery));
